(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(51),s=a.n(o),c=(a(62),a(16)),l=a(17),i=a(19),u=a(18),m=a(20),p=a(54),h=a(24),d=(a(63),a(7)),g=a.n(d),f=a(13),v=a(109),b=a(110),E=a(111),w=a(112),y=a(113),N=a(114),O=a(52),j=a(10),k=a.n(j),x=Object(n.createContext)(),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={authorized:!1,username:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=localStorage.getItem("JWT"))){e.next=5;break}this.setState({authorized:!1,username:""}),e.next=15;break;case 5:return e.prev=5,e.next=8,k.a.get("/auth/profile",{headers:{Authorization:"JWT ".concat(t)}});case 8:a=e.sent,this.setState({username:a.data.username,authorized:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0.response);case 15:case"end":return e.stop()}},e,this,[[5,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(x.Provider,{value:Object(O.a)({},this.state)},this.props.children)}}]),t}(n.Component),C=(a(83),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={imageGif:"",isOpen:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({imageGif:"./Images/diaryTitleAnimated.gif"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleLogOut",value:function(e){e.preventDefault(),localStorage.removeItem("JWT"),window.location.href="/"}},{key:"render",value:function(){var e=this.context,t=e.authorized,a=e.username;return r.a.createElement("div",{className:"appHeader"},r.a.createElement("img",{className:"logoHome",alt:"gif logo",src:this.state.imageGif}),r.a.createElement(v.a,{color:"warning",light:!0,expand:"lg"},r.a.createElement(b.a,{onClick:this.toggle}),r.a.createElement(E.a,{isOpen:this.state.isOpen,navbar:!0},t?r.a.createElement(w.a,{className:"mr-auto",navbar:!0},r.a.createElement(y.a,{className:"authNavItemNavbar"},r.a.createElement("p",{className:"usernameLoggedinHome"},"Logged in as: ",a)),r.a.createElement(y.a,{className:"authNavItemNavbarBtn"},r.a.createElement("button",{className:"logoutBtnNavbar",onClick:this.handleLogOut},"Logout"))):r.a.createElement(w.a,{className:"mr-auto",navbar:!0},r.a.createElement(y.a,{className:"navItemNavbar"},r.a.createElement(N.a,{className:"linksNavbar",href:"/"},"Home")),r.a.createElement(y.a,{className:"navItemNavbar"},r.a.createElement(N.a,{className:"linksNavbar",href:"/signup"},"Register")),r.a.createElement(y.a,{className:"navItemNavbar"},r.a.createElement(N.a,{className:"linksNavbar",href:"/login"},"Login")),r.a.createElement(y.a,{className:"navItemNavbar"},r.a.createElement(N.a,{className:"linksNavbar",href:"https://github.com/alexisyepes/diary-app",target:"blank"},"GitHub"))," "))))}}]),t}(n.Component));C.contextType=x;var P=C,T=a(27),B=a(115),I=a(116),D=a(117),A=a(118),M=(a(97),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",errorMessage:"",loggedIn:!1,showError:!1,showNullError:!1,authorized:!1},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(f.a)(g.a.mark(function e(t){var n,r,o,s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.email,o=n.password,""!==r&&""!==o){e.next=6;break}a.setState({showError:!1,showNullError:!0,loggedIn:!1}),e.next=20;break;case 6:return e.prev=6,e.next=9,k.a.post("/auth/login",{email:r,password:o});case 9:s=e.sent,localStorage.setItem("JWT",s.data.token),a.setState({loggedIn:!0,showError:!1,showNullError:!1,authorized:!0}),window.location.href="/profile",e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),console.error(e.t0.response),a.setState({errorMessage:e.t0.response.data.message}),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[6,15]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container signinPage"},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(B.a,{className:"formBox",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("h4",{className:"signinTitle"},"Sign in"),r.a.createElement("hr",{style:{background:"black"}}),r.a.createElement(I.a,null,r.a.createElement(D.a,{placeholder:"Email",style:{float:"right"},type:"email",id:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement(D.a,{placeholder:"Password",style:{float:"right",marginBottom:"15px"},type:"password",id:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(A.a,{style:{marginTop:"15px"},className:"btn-primary "},"Login")),r.a.createElement("p",null,"Don't have an account yet? ",r.a.createElement("br",null),r.a.createElement("a",{href:"/signup"},"Click here to register")),r.a.createElement("h5",{style:{textAlign:"center",color:"yellow",paddingBottom:"10px"}},this.state.errorMessage))))}}]),t}(n.Component)),z={getUser:function(e){return k.a.get("/api/users/"+e)},addUser:function(e){return k.a.post("/auth/signup",e)},logginUser:function(e){return k.a.post("/api/users/login",e)},saveText:function(e,t){return k.a.post("/users/"+e,t)},getAllPagesBook:function(e){return k.a.get("/auth/users/"+e)},deletePage:function(e){return k.a.delete("/diary/page/"+e)},getOnePageBook:function(e){return k.a.get("/diary/page/"+e)},updateOnePageBook:function(e,t){return k.a.put("/diary/page/"+e,t)}},W=(a(98),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",firstName:"",email:"",password:"",password2:"",errorMsg:""},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){if(e.preventDefault(),a.state.username&&a.state.firstName&&a.state.email&&a.state.password&&a.state.password2){if(a.state.email.includes("@"))return a.state.password!==a.state.password2?(a.setState({errorMsg:"Passwords don't match!"}),void console.log("Passwords don't match!")):void(a.state.password.length<6?a.setState({errorMsg:"Password must be at least 6 characters long!"}):z.addUser({username:a.state.username,firstName:a.state.firstName.replace(/^./,function(e){return e.toUpperCase()}),email:a.state.email,password:a.state.password}).then(function(e){400!==e.data.status?(a.setState({username:"",firstName:"",email:"",password:"",password2:""}),alert("You can Login now!"),window.location.href="/login"):a.setState({errorMsg:e.data.message})}));a.setState({errorMsg:"Please enter a valid email address!"})}else a.setState({errorMsg:"Please enter all required fields!"})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container signinPage"},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(B.a,{className:"formBoxSignup",onSubmit:this.handleSubmit},r.a.createElement("h4",{className:"signinTitle",style:{textAlign:"center",marginTop:"15px"}},"Register"),r.a.createElement(I.a,null,r.a.createElement("hr",{style:{background:"grey",marginTop:"10px"}}),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"username"},"* Username"),r.a.createElement(D.a,{className:"form-control",type:"text",id:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"* First Name"),r.a.createElement(D.a,{className:"form-control",type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"* Email"),r.a.createElement(D.a,{className:"form-control",type:"text",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"* Password"),r.a.createElement(D.a,{className:"form-control",type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password2"},"* Confirm Password"),r.a.createElement(D.a,{className:"form-control",type:"password",id:"password2",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement(A.a,{style:{marginTop:"30px"},className:"btn-primary lighten-1 z-depth-0"},"Create Account"))),r.a.createElement("h5",{style:{textAlign:"center",color:"yellow",paddingBottom:"10px"}},this.state.errorMsg))))}}]),t}(n.Component)),J=(a(99),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container wrapper"},r.a.createElement("h1",{className:"homeTitle"},"Your personal diary"),r.a.createElement("h5",{className:"homeSubTitle"},"Create an account and start writing on your diary"),r.a.createElement("img",{className:"imgRegister",src:"./Images/diaryRegisterScreenshot.JPG",alt:"register"}),r.a.createElement("img",{className:"imgDiary1",src:"./Images/diaryScreenshot.JPG",alt:"diary"}),r.a.createElement("img",{className:"imgDiary2",src:"./Images/diaryScreenshot2.JPG",alt:"diary"}))}}]),t}(n.Component)),L=a(15),U=a(32),G=a.n(U),F=a(53),H=a.n(F),R=a(121),Y=a(119),_=a(120),V=(a(102),function(e){var t=Object(n.useState)(""),a=Object(L.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(""),l=Object(L.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(""),p=Object(L.a)(m,2),h=p[0],d=p[1],v=Object(n.useState)(!0),b=Object(L.a)(v,2),E=b[0],w=b[1],y=Object(n.useState)(!1),N=Object(L.a)(y,2),O=N[0],j=N[1],x=Object(n.useState)([]),S=Object(L.a)(x,2),C=S[0],P=S[1],T=Object(n.useState)(!1),B=Object(L.a)(T,2),I=B[0],D=B[1],M=Object(n.useState)(!1),W=Object(L.a)(M,2),J=W[0],U=W[1],F=Object(n.useState)(""),V=Object(L.a)(F,2),q=V[0],$=V[1],K=Object(n.useState)(!1),Q=Object(L.a)(K,2),X=Q[0],Z=Q[1],ee=Object(n.useState)(""),te=Object(L.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(""),oe=Object(L.a)(re,2),se=oe[0],ce=oe[1];Object(n.useEffect)(function(){var e=localStorage.getItem("JWT");if(null==e)w(!1),j(!0);else try{!function(){var t=Object(f.a)(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("/auth/profile",{headers:{Authorization:"JWT ".concat(e)}});case 2:a=t.sent,s(a.data._id),d(a.data.firstName),w(!1),j(!1),window.innerWidth>1450?ce("500"):ce("270");case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()}catch(O){console.log(O.response),j(!0)}},[]);var le=function(){D(!I),U(!1)},ie=function(){var e=Object(f.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget,!1===X&&($(""),ne("")),Z(!X),ne(a.value),n=a.value,console.log(n),e.next=8,z.getOnePageBook(n).then(function(e){$(e.data.text)}).catch(function(e){return console.log(e)});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(f.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=ae,n={text:q},e.next=5,z.updateOnePageBook(a,n).then(function(){window.location.href="/profile"}).catch(function(e){return console.log(e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(f.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),U(!J),D(!1),a=o,e.next=6,z.getAllPagesBook(a).then(function(e){P(e.data.text)}).catch(function(e){return console.log(e)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(f.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=o,n={text:i},e.next=5,z.saveText(a,n).then(function(e){console.log(e.data)}).catch(function(e){return console.log(e)});case 5:window.location.href="/profile";case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(f.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.currentTarget,n=a.value,!window.confirm("Are you sure you wish to delete this Page permanently?")){e.next=6;break}return e.next=5,z.deletePage(n).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)});case 5:window.location.href="/profile";case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(O)return r.a.createElement("div",{style:{marginTop:"100px",fontSize:"30px",height:"100vh",color:"white"}},r.a.createElement("h3",null,"...Problem fetching user data. Please login again"));if(E)return r.a.createElement("div",{style:{marginTop:"100px",color:"white",fontSize:"30px",height:"100vh"}},"Loading User Data...");var de=C.length?C.map(function(e){return r.a.createElement("div",{className:"articleContent",key:e._id},r.a.createElement("button",{value:e._id,onClick:he,className:"deleteBtn"},"Delete Page"),r.a.createElement("button",{className:"openBookEditPageBtn",value:e._id,onClick:ie},"Edit"),r.a.createElement("button",{className:"bookEmptyPageBtn",onClick:le},"Empty Page"),r.a.createElement("hr",{style:{background:"white"}}),r.a.createElement("article",{className:"articleContent"},e.text))}):r.a.createElement("p",{className:"messageWhenNoContentOnBook"},"Your diary is empty. ",r.a.createElement("br",null)," Click the Empty Page Button to start");return r.a.createElement("div",{className:"container profileMainContainer"},r.a.createElement("button",{className:"openBookBtn",onClick:me},"Open / Close Your Diary"),r.a.createElement("button",{className:"openBookEmptyPageBtn",onClick:le},"Empty Page"),r.a.createElement("div",null,r.a.createElement(R.a,{className:"modalToEditText",isOpen:X,toggle:ie},r.a.createElement(Y.a,{toggle:ie},r.a.createElement("p",{className:"editPageTitle"},"Edit this page down below")),r.a.createElement(_.a,null,r.a.createElement("form",{onSubmit:ue},r.a.createElement("input",{className:"inputEditText",onChange:function(e){return $(e.target.value)},defaultValue:q,type:"text"}),r.a.createElement(A.a,{block:!0},"Save Changes"))))),r.a.createElement("div",null,J?r.a.createElement(G.a,null,r.a.createElement("div",{className:"bookCover"},r.a.createElement("h1",{className:"profileTitle"},"This Diary Belongs to ",h),r.a.createElement(H.a,{uncutPages:"true",showSwipeHint:"true",pageBackground:"rgb(230, 216, 95)",className:"flipPageComponent",width:se,height:"500",orientation:"horizontal"},de))):r.a.createElement("h4",{style:I?{display:"none"}:{display:"block"},className:"messageBeneathBooks"},"\u2191 ",r.a.createElement("br",null)," Use the buttons above")),I?r.a.createElement(G.a,null,r.a.createElement("div",{className:"book"},r.a.createElement("h1",{className:"profileTitle"},h,"'s Diary"),r.a.createElement("form",{onSubmit:pe},r.a.createElement("textarea",{name:"textToSave",defaultValue:i,onChange:function(e){return u(e.target.value)},className:"bookInput",rows:"60",cols:"50",placeholder:"Start Typing"}),r.a.createElement("button",{className:"saveButton"},"Save")))):null)}),q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(S,null,r.a.createElement(P,null)),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:J}),r.a.createElement(h.a,{exact:!0,path:"/signup",component:W}),r.a.createElement(h.a,{exact:!0,path:"/login",component:M}),r.a.createElement(h.a,{exact:!0,path:"/profile",component:V}))))}}]),t}(n.Component),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(q,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");$?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):K(e)})}}()},57:function(e,t,a){e.exports=a(108)},62:function(e,t,a){},63:function(e,t,a){},83:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.71af2d88.chunk.js.map